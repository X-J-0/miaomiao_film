{"remainingRequest":"C:\\Users\\86183\\Desktop\\notebook\\vue学习\\vue电影项目\\miaomiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86183\\Desktop\\notebook\\vue学习\\vue电影项目\\miaomiao\\src\\components\\Allocate\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\86183\\Desktop\\notebook\\vue学习\\vue电影项目\\miaomiao\\src\\components\\Allocate\\index.vue","mtime":1586600406498},{"path":"C:\\Users\\86183\\Desktop\\notebook\\vue学习\\vue电影项目\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86183\\Desktop\\notebook\\vue学习\\vue电影项目\\miaomiao\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\86183\\Desktop\\notebook\\vue学习\\vue电影项目\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86183\\Desktop\\notebook\\vue学习\\vue电影项目\\miaomiao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6J0FsbG9jYXRlJywNCiAgZGF0YSgpew0KICAgcmV0dXJuIHsNCiAgICAgICBjaW5lbWFMaXN0OltdLA0KICAgICAgIGlzTG9hZGluZzp0cnVlLA0KICAgICAgIHByZXZDaXR5SWQ6LTENCiAgIH07DQogIH0sDQogIG1vdW50ZWQoKXsNCiAgICAgIHZhciBjaXR5SWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jaXR5LmlkOw0KICAgICAgaWYodGhpcy5wcmV2Q2l0eUlkID09PSBjaXR5SWQpe3JldHVybjt9DQogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7DQogICAgICB0aGlzLmF4aW9zLmdldCgnL2FwaS9jaW5lbWFMaXN0P2NpdHlJZD0nK2NpdHlJZCkudGhlbigocmVzKT0+ew0KICAgICAgICAgIHZhciBtc2cgPSByZXMuZGF0YS5tc2c7DQogICAgICAgICAgaWYobXNnID09PSAnb2snKXsNCiAgICAgICAgICAgICAgdGhpcy5jaW5lbWFMaXN0ID0gcmVzLmRhdGEuZGF0YS5jaW5lbWFzOw0KICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZz1mYWxzZTsNCiAgICAgICAgICAgICAgdGhpcy5wcmV2Q2l0eUlkID0gY2l0eUlkOw0KICAgICAgICAgIH0NCiAgICAgIH0pDQogIH0sDQogIGZpbHRlcnMgOiB7DQogICAgICBmb3JtYXRDYXJkKGtleSl7DQogICAgICAgICAgdmFyIGNhcmQgPSBbDQogICAgICAgICAgICAgIHtrZXk6J2FsbG93UmVmdW5kJyx2YWx1ZTon5pS5562+J30sDQogICAgICAgICAgICAgIHtrZXk6J2VuZG9yc2UnLHZhbHVlOifpgIAnfSwNCiAgICAgICAgICAgICAge2tleTonc2VsbCcsdmFsdWU6J+aKmOaJo+WNoSd9LA0KICAgICAgICAgICAgICB7a2V5OidzbmFrZScsdmFsdWU6J+Wwj+WQgyd9DQogICAgICAgICAgXTsNCiAgICAgICAgICBmb3IodmFyIGkgPSAwO2k8Y2FyZC5sZW5ndGg7aSsrKXsNCiAgICAgICAgICAgICAgaWYoY2FyZFtpXS5rZXkgPT09IGtleSl7DQogICAgICAgICAgICAgICAgICByZXR1cm4gY2FyZFtpXS52YWx1ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gJyc7DQogICAgICB9LA0KICAgICAgY2xhc3NDYXJkKGtleSl7DQogICAgICAgICAgdmFyIGNhcmQgPSBbDQogICAgICAgICAgICAgIHtrZXk6J2FsbG93UmVmdW5kJyx2YWx1ZTonYmwnfSwNCiAgICAgICAgICAgICAge2tleTonZW5kb3JzZScsdmFsdWU6J2JsJ30sDQogICAgICAgICAgICAgIHtrZXk6J3NlbGwnLHZhbHVlOidvcid9LA0KICAgICAgICAgICAgICB7a2V5OidzbmFrZScsdmFsdWU6J29yJ30NCiAgICAgICAgICBdOw0KICAgICAgICAgIGZvcih2YXIgaSA9IDA7aTxjYXJkLmxlbmd0aDtpKyspew0KICAgICAgICAgICAgICBpZihjYXJkW2ldLmtleSA9PT0ga2V5KXsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBjYXJkW2ldLnZhbHVlOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Allocate","sourcesContent":["<template>\r\n<div class=\"cinema_body\">\r\n    <Loading v-if=\"isLoading\"/>\r\n    <ul v-else>\r\n        <li v-for=\"item in cinemaList\" :key=\"item.id\">\r\n            <div>\r\n                <span>{{item.nm}}</span>\r\n                <span class=\"q\"><span class=\"price\">{{item.sellPrice}}</span></span>\r\n            </div>\r\n            <div class=\"address\">\r\n                <span>{{item.addr}}</span>\r\n                <span>{{item.distance}}</span>\r\n            </div>\r\n            <div class=\"card\">\r\n                <div class=\"card\">\r\n                    <div v-for=\"(num,key) in item.tag\" v-if=\"num===1\" :key=\"key\" :class='key | classCard'>{{key | formatCard}}</div>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name:'Allocate',\r\n  data(){\r\n   return {\r\n       cinemaList:[],\r\n       isLoading:true,\r\n       prevCityId:-1\r\n   };\r\n  },\r\n  mounted(){\r\n      var cityId = this.$store.state.city.id;\r\n      if(this.prevCityId === cityId){return;}\r\n      this.isLoading = true;\r\n      this.axios.get('/api/cinemaList?cityId='+cityId).then((res)=>{\r\n          var msg = res.data.msg;\r\n          if(msg === 'ok'){\r\n              this.cinemaList = res.data.data.cinemas;\r\n              this.isLoading=false;\r\n              this.prevCityId = cityId;\r\n          }\r\n      })\r\n  },\r\n  filters : {\r\n      formatCard(key){\r\n          var card = [\r\n              {key:'allowRefund',value:'改签'},\r\n              {key:'endorse',value:'退'},\r\n              {key:'sell',value:'折扣卡'},\r\n              {key:'snake',value:'小吃'}\r\n          ];\r\n          for(var i = 0;i<card.length;i++){\r\n              if(card[i].key === key){\r\n                  return card[i].value;\r\n              }\r\n          }\r\n          return '';\r\n      },\r\n      classCard(key){\r\n          var card = [\r\n              {key:'allowRefund',value:'bl'},\r\n              {key:'endorse',value:'bl'},\r\n              {key:'sell',value:'or'},\r\n              {key:'snake',value:'or'}\r\n          ];\r\n          for(var i = 0;i<card.length;i++){\r\n              if(card[i].key === key){\r\n                  return card[i].value;\r\n              }\r\n          }\r\n          return '';\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#content .cinema_body{flex:1;overflow:auto;}\r\n.cinema_body ul{padding:20px;}\r\n.cinema_body li{border-bottom:1px solid #e6e6e6;margin-bottom:20px;}\r\n.cinema_body div{margin-bottom:10px;}\r\n.cinema_body .q{font-size:11px;color:#f03d37;}\r\n.cinema_body .price{font-size:18px;}\r\n.cinema_body .address{font-size:13px;color:#666;}\r\n.cinema_body .address span:nth-of-type(2){float:right;}\r\n.cinema_body .card{display:flex;}\r\n.cinema_body .card div{padding:0 3px;height:15px;line-height: 15px;border-radius: 2px;color:#f90;}\r\n.cinema_body .card div.or{color:#f90;border:1px solid #f90;}\r\n.cinema_body .card div.bl{color:#589daf;border:1px solid #589daf;}\r\n</style>\r\n\r\n"]}]}